<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeSpace | Mental Support & Community</title>
    <style>
        :root {
            --primary-color: #5d9e9e;
            --secondary-color: #f0f8ff;
            --text-color: #333333;
            --accent-color: #ff9f1c;
            --card-bg: white;
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: var(--font-family); }
        body { background-color: var(--secondary-color); color: var(--text-color); line-height: 1.6; min-height: 100vh; display: flex; flex-direction: column; }

        header { background-color: var(--card-bg); box-shadow: 0 2px 5px rgba(0,0,0,0.05); padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); text-decoration: none; }
        nav a { color: var(--text-color); text-decoration: none; margin-left: 1.5rem; padding: 0.5rem; border-radius: 4px; transition: background-color 0.3s, color 0.3s; }
        nav a:hover, nav a.active { color: white; background-color: var(--primary-color); }

        main { flex-grow: 1; padding: 2rem; max-width: 1200px; width: 100%; margin: 0 auto; }
        section { display: none; padding: 2rem; background-color: var(--card-bg); border-radius: 12px; box-shadow: 0 6px 15px rgba(0,0,0,0.1); margin-bottom: 2rem; }
        section.active { display: block; }
        h2 { font-size: 2rem; color: var(--primary-color); margin-bottom: 1.5rem; border-bottom: 2px solid var(--primary-color); padding-bottom: 0.5rem; }

        .card { background-color: var(--secondary-color); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; box-shadow: inset 0 0 5px rgba(0,0,0,0.05); }

        .post-form textarea { width: 100%; min-height: 120px; padding: 1rem; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 1rem; resize: vertical; }
        .form-group { margin-bottom: 1rem; }
        .btn-submit { display: block; width: 100%; padding: 0.75rem; background-color: var(--accent-color); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background-color 0.3s; }
        .btn-submit:hover { background-color: #d18216; }

        #message-box { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; text-align: center; display: none; }

        .breathing-container { display: flex; flex-direction: column; align-items: center; padding: 2rem; }
        .breathing-circle { width: 150px; height: 150px; background-color: var(--primary-color); border-radius: 50%; box-shadow: 0 0 10px rgba(93,158,158,0.5); margin: 2rem 0; transition: all 4s ease-in-out; opacity: 0.8; display: flex; justify-content: center; align-items: center; color: white; font-weight: bold; }
        .breathing-circle.grow { transform: scale(1.5); opacity: 1; }
        .breathing-circle.shrink { transform: scale(1); opacity: 0.8; }

        .contact-list div { padding: 1rem; background-color: #fff3f3; border: 1px solid #f5c6cb; border-left: 5px solid red; border-radius: 8px; margin-bottom: 1rem; }
        .contact-list strong { color: red; }

        footer { margin-top: auto; background-color: #f1f1f1; color: #777; text-align: center; padding: 1rem 0; font-size: 0.9rem; }

        @media (max-width: 768px) {
            header { flex-direction: column; }
            nav { margin-top: 1rem; }
            nav a { margin: 0 0.5rem; display: inline-block; }
        }
    </style>
</head>
<body>

    <header>
        <a href="#home" class="logo" onclick="navigateTo('home')">SafeSpace üïäÔ∏è</a>
        <nav>
            <a href="#home" id="nav-home" class="active" onclick="navigateTo('home')">Home</a>
            <a href="#community" id="nav-community" onclick="navigateTo('community')">Community Forum</a>
            <a href="#tools" id="nav-tools" onclick="navigateTo('tools')">Guided Tools</a>
            <a href="#resources" id="nav-resources" onclick="navigateTo('resources')">Resources & Help</a>
        </nav>
    </header>

    <main>
        <section id="home" class="active">
            <h2>Welcome to SafeSpace</h2>
            <p>This is a moderated platform designed to offer mental health resources and a safe peer support community. Your privacy and safety are our top priority.</p>
            <div class="card" style="margin-top: 1.5rem;">
                <h3>Our Mission</h3>
                <p>To provide a non-judgmental space where you can share, connect, and access helpful self-care tools anytime you need them.</p>
            </div>
            <p style="text-align: center; margin-top: 2rem;">Use the navigation bar above to explore the community, guided tools, and emergency resources.</p>
        </section>

        <section id="community">
            <h2>Community Forum (Anonymous Posting)</h2>
            <div id="message-box"></div>

            <form id="post-form" class="post-form">
                <div class="form-group">
                    <label for="post-content" style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Share your thoughts anonymously:</label>
                    <textarea id="post-content" placeholder="Type your message here. Be kind and respectful. Max 500 characters." maxlength="500" required></textarea>
                </div>
                <div class="form-group">
                    <input type="checkbox" id="anonymous-check" name="anonymous" checked>
                    <label for="anonymous-check">Post Anonymously (Recommended)</label>
                </div>
                <button type="submit" class="btn-submit">Submit Post</button>
            </form>

            <h3 style="margin-top: 2rem; color: #555;">Recent Posts (Mock Data)</h3>
            <div id="posts-list">
                <div class="card">
                    <small style="color: var(--primary-color);">Anonymous - Today</small>
                    <p style="margin-top: 0.5rem;">"Feeling overwhelmed with study pressure lately. It helps just to write it out. Hang in there, everyone."</p>
                </div>
                <div class="card">
                    <small style="color: var(--primary-color);">Moderated User 45 - Yesterday</small>
                    <p style="margin-top: 0.5rem;">"The guided breathing tool really helped me focus before my exam this morning. Highly recommend it!"</p>
                </div>
            </div>
            <p style="font-size: 0.9rem; margin-top: 1rem; color: #777;">Note: Posts will be loaded from Java backend in a live application.</p>
        </section>

        <section id="tools">
            <h2>Guided Breathing & Self-Care</h2>
            <p>Follow the circle below for a calming 4-7-8 breathing exercise.</p>

            <div class="breathing-container">
                <p id="breathing-instruction" style="font-size: 1.2rem; height: 1.5rem; color: var(--primary-color);"></p>
                <div class="breathing-circle" id="breathing-circle">
                    <span id="breathing-timer">Ready</span>
                </div>
                <button class="btn-submit" style="width: 200px;" onclick="startBreathing()">Start Breathing</button>
            </div>

            <h3 style="margin-top: 2rem; color: #555;">Mood Journaling (Backend Integration)</h3>
            <div class="card">
                <p>Post your mood entries and analyze them with Java backend + AI API.</p>
                <button class="btn-submit" style="width: 200px; margin-top: 1rem; background-color: #66b2b2;">Open Journal</button>
            </div>
        </section>

        <section id="resources">
            <h2>Resource Library & Emergency Contacts</h2>
            <p>If you are in immediate danger or crisis, please use the contacts below.</p>

            <div class="contact-list" style="margin-top: 1.5rem;">
                <div>
                    <strong>Emergency Hotline (Global/Crisis):</strong>
                    <p>Phone: 988 (US/Canada), 112 (Europe), 999 (UK)</p>
                </div>
                <div>
                    <strong>National Suicide Prevention Lifeline:</strong>
                    <p>Call or Text: 988 (24/7)</p>
                </div>
                <div>
                    <strong>Crisis Text Line:</strong>
                    <p>Text HOME to 741741 (24/7)</p>
                </div>
            </div>

            <h3 style="margin-top: 2rem; color: #555;">Self-Help Resources</h3>
            <div class="card">
                <p><strong>Coping Mechanisms:</strong> Simple techniques for managing panic attacks and overwhelming thoughts.</p>
                <p><strong>Sleep Hygiene Guide:</strong> Tips for improving rest and recovery.</p>
            </div>
        </section>

    </main>

    <footer>
        <p>SafeSpace Project 2024 | Focused on User Safety & Privacy.</p>
    </footer>

    <script>
        // Navigation
        function navigateTo(sectionId) {
            document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');

            document.querySelectorAll('nav a').forEach(link => link.classList.remove('active'));
            const activeLink = document.querySelector(`nav a[href="#${sectionId}"]`);
            if(activeLink) activeLink.classList.add('active');
        }

        window.onload = () => {
            const hash = window.location.hash.substring(1);
            navigateTo(hash || 'home');
        };

        // Community Post Submission
        document.getElementById('post-form').addEventListener('submit', async function(event){
            event.preventDefault();
            const content = document.getElementById('post-content').value.trim();
            const isAnonymous = document.getElementById('anonymous-check').checked;
            const messageBox = document.getElementById('message-box');

            if(!content){
                messageBox.textContent = "Please enter content for your post.";
                messageBox.style.display = 'block';
                messageBox.style.backgroundColor = '#f8d7da';
                messageBox.style.color = '#721c24';
                return;
            }

            // ---- BACKEND CALL PLACEHOLDER ----
            // Example: fetch('/post', { method: 'POST', body: JSON.stringify({content, isAnonymous}) })
            // You would use your Java Servlet to save the post

            messageBox.textContent = isAnonymous ? 
                "Post submitted successfully! It will be reviewed by a moderator." :
                "Post submitted successfully! We appreciate your contribution.";
            messageBox.style.display = 'block';
            messageBox.style.backgroundColor = '#d4edda';
            messageBox.style.color = '#155724';

            document.getElementById('post-content').value = '';
            const newPostHTML = `
                <div class="card">
                    <small style="color: var(--primary-color);">${isAnonymous ? 'Anonymous' : 'You (Pending Review)'} - Just now</small>
                    <p style="margin-top:0.5rem;">"${content}"</p>
                </div>
            `;
            document.getElementById('posts-list').insertAdjacentHTML('afterbegin', newPostHTML);

            setTimeout(() => messageBox.style.display = 'none', 5000);
        });

        // Guided Breathing Tool
        const circle = document.getElementById('breathing-circle');
        const instruction = document.getElementById('breathing-instruction');
        const timerText = document.getElementById('breathing-timer');
        let isBreathing = false;

        function updateInstruction(text, time){
            instruction.textContent = text;
            timerText.textContent = time;
        }

        function breathingCycle(){
            if(!isBreathing) return;

            updateInstruction("Breathe In Deeply", 4);
            circle.style.transitionDuration = '4s';
            circle.classList.add('grow');

            setTimeout(() => {
                if(!isBreathing) return;
                updateInstruction("Hold", 7);
                circle.style.transitionDuration = '7s';

                setTimeout(() => {
                    if(!isBreathing) return;
                    updateInstruction("Breathe Out Slowly", 8);
                    circle.style.transitionDuration = '8s';
                    circle.classList.remove('grow');

                    setTimeout(() => {
                        if(!isBreathing) return;
                        updateInstruction("Relax...", 1);
                        circle.style.transitionDuration = '1s';

                        setTimeout(() => {
                            if(isBreathing) breathingCycle();
                            else updateInstruction("Finished", 0);
                        }, 1000);
                    }, 8000);
                }, 7000);
            }, 4000);
        }

        function startBreathing(){ if(!isBreathing){ isBreathing=true; breathingCycle(); } }
    </script>

</body>
</html>